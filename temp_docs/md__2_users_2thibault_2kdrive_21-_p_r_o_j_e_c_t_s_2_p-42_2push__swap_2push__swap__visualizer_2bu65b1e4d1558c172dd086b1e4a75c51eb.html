<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Webserv: deprecations</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Webserv
   </div>
   <div id="projectbrief">Webserv handle HTML request GET,POST, DELETE and CGI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">deprecations</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="top"></a> </p>
<h1><a class="anchor" id="autotoc_md259"></a>
Deprecations and incoming changes</h1>
<p>This page documents current deprecations and upcoming planned changes inside Catch2. The difference between these is that a deprecated feature will be removed, while a planned change to a feature means that the feature will behave differently, but will still be present. Obviously, either of these is a breaking change, and thus will not happen until at least the next major release.</p>
<h2><a class="anchor" id="autotoc_md260"></a>
Deprecations</h2>
<h3><a class="anchor" id="autotoc_md261"></a>
<code>--list-*</code> return values</h3>
<p>The return codes of the <code>--list-*</code> family of command line arguments will no longer be equal to the number of tests/tags/etc found, instead it will be 0 for success and non-zero for failure.</p>
<h3><a class="anchor" id="autotoc_md262"></a>
<code>--list-test-names-only</code></h3>
<p><code>--list-test-names-only</code> command line argument will be removed.</p>
<h3><a class="anchor" id="autotoc_md263"></a>
<code>ANON_TEST_CASE</code></h3>
<p><code>ANON_TEST_CASE</code> is scheduled for removal, as it can be fully replaced by a <code>TEST_CASE</code> with no arguments.</p>
<h3><a class="anchor" id="autotoc_md264"></a>
Secondary description amongst tags</h3>
<p>Currently, the tags part of <code>TEST_CASE</code> (and others) macro can also contain text that is not part of tags. This text is then separated into a "description" of the test case, but the description is then never used apart from writing it out for <code>--list-tests -v high</code>.</p>
<p>Because it isn't actually used nor documented, and brings complications to Catch2's internals, description support will be removed.</p>
<h3><a class="anchor" id="autotoc_md265"></a>
SourceLineInfo::empty()</h3>
<p>There should be no reason to ever have an empty <code>SourceLineInfo</code>, so the method will be removed.</p>
<h3><a class="anchor" id="autotoc_md266"></a>
Composing lvalues of already composed matchers</h3>
<p>Because a significant bug in this use case has persisted for 2+ years without a bug report, and to simplify the implementation, code that composes lvalues of composed matchers will not compile. That is, this code will no longer work:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> m1 = Contains(<span class="stringliteral">&quot;string&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> m2 = Contains(<span class="stringliteral">&quot;random&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> composed1 = m1 || m2;</div>
<div class="line"><span class="keyword">auto</span> m3 = Contains(<span class="stringliteral">&quot;different&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> composed2 = composed1 || m3;</div>
<div class="line">REQUIRE_THAT(<a class="code hl_struct" href="structfoo.html">foo</a>(), !composed1);</div>
<div class="line">REQUIRE_THAT(<a class="code hl_struct" href="structfoo.html">foo</a>(), composed2);</div>
<div class="ttc" id="astructfoo_html"><div class="ttname"><a href="structfoo.html">foo</a></div><div class="ttdef"><b>Definition</b> X02-DisabledMacros.cpp:15</div></div>
</div><!-- fragment --><p>Instead you will have to write this:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> m1 = Contains(<span class="stringliteral">&quot;string&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> m2 = Contains(<span class="stringliteral">&quot;random&quot;</span>);</div>
<div class="line"><span class="keyword">auto</span> m3 = Contains(<span class="stringliteral">&quot;different&quot;</span>);</div>
<div class="line">REQUIRE_THAT(<a class="code hl_struct" href="structfoo.html">foo</a>(), !(m1 || m2));</div>
<div class="line">REQUIRE_THAT(<a class="code hl_struct" href="structfoo.html">foo</a>(), m1 || m2 || m3);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md267"></a>
<code>ParseAndAddCatchTests.cmake</code></h3>
<p>The CMake/CTest integration using <code>ParseAndAddCatchTests.cmake</code> is deprecated, as it can be replaced by <code>Catch.cmake</code> that provides the function <code>catch_discover_tests</code> to get tests directly from a CMake target via the command line interface instead of parsing C++ code with regular expressions.</p>
<h2><a class="anchor" id="autotoc_md268"></a>
Planned changes</h2>
<h3><a class="anchor" id="autotoc_md269"></a>
Reporter verbosities</h3>
<p>The current implementation of verbosities, where the reporter is checked up-front whether it supports the requested verbosity, is fundamentally misguided and will be changed. The new implementation will no longer check whether the specified reporter supports the requested verbosity, instead it will be up to the reporters to deal with verbosities as they see fit (with an expectation that unsupported verbosities will be, at most, warnings, but not errors).</p>
<h3><a class="anchor" id="autotoc_md270"></a>
Output format of <code>--list-*</code> command line parameters</h3>
<p>The various list operations will be piped through reporters. This means that e.g. XML reporter will write the output as machine-parseable XML, while the Console reporter will keep the current, human-oriented output.</p>
<h3><a class="anchor" id="autotoc_md271"></a>
<code>CHECKED_IF</code> and <code>CHECKED_ELSE</code></h3>
<p>To make the <code>CHECKED_IF</code> and <code>CHECKED_ELSE</code> macros more useful, they will be marked as "OK to fail" (<code>Catch::ResultDisposition::SuppressFail</code> flag will be added), which means that their failure will not fail the test, making the <code>else</code> actually useful.</p>
<h3><a class="anchor" id="autotoc_md272"></a>
Change semantics of <code>[.]</code> and tag exclusion</h3>
<p>Currently, given these 2 tests </p><div class="fragment"><div class="line">TEST_CASE(<span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;[.][foo]&quot;</span>) {}</div>
<div class="line">TEST_CASE(<span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;[.][bar]&quot;</span>) {}</div>
</div><!-- fragment --><p> specifying <code>[foo]</code> as the testspec will run test "A" and specifying <code>~[foo]</code> will run test "B", even though it is hidden. Also, specifying <code>~[baz]</code> will run both tests. This behaviour is often surprising and will be changed so that hidden tests are included in a run only if they positively match a testspec.</p>
<h3><a class="anchor" id="autotoc_md273"></a>
Console Colour API</h3>
<p>The API for Catch2's console colour will be changed to take an extra argument, the stream to which the colour code should be applied.</p>
<h3><a class="anchor" id="autotoc_md274"></a>
Type erasure in the <code>PredicateMatcher</code></h3>
<p>Currently, the <code>PredicateMatcher</code> uses <code>std::function</code> for type erasure, so that type of the matcher is always <code>PredicateMatcher&lt;T&gt;</code>, regardless of the type of the predicate. Because of the high compilation overhead of <code>std::function</code>, and the fact that the type erasure is used only rarely, <code>PredicateMatcher</code> will no longer be type erased in the future. Instead, the predicate type will be made part of the PredicateMatcher's type.</p>
<hr  />
<p><a href="Readme.md#top">Home</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
