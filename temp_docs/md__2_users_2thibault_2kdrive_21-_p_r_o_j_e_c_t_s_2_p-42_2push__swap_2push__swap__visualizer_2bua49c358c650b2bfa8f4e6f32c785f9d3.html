<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Webserv: release-process</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Webserv
   </div>
   <div id="projectbrief">Webserv handle HTML request GET,POST, DELETE and CGI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">release-process</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="top"></a> </p>
<h1><a class="anchor" id="autotoc_md580"></a>
How to release</h1>
<p>When enough changes have accumulated, it is time to release new version of Catch. This document describes the process in doing so, that no steps are forgotten. Note that all referenced scripts can be found in the <code>scripts/</code> directory.</p>
<h2><a class="anchor" id="autotoc_md581"></a>
Necessary steps</h2>
<p>These steps are necessary and have to be performed before each new release. They serve to make sure that the new release is correct and linked-to from the standard places.</p>
<h3><a class="anchor" id="autotoc_md582"></a>
Testing</h3>
<p>All of the tests are currently run in our CI setup based on TravisCI and AppVeyor. As long as the last commit tested green, the release can proceed.</p>
<h3><a class="anchor" id="autotoc_md583"></a>
Incrementing version number</h3>
<p>Catch uses a variant of <a href="http://semver.org/">semantic versioning</a>, with breaking API changes (and thus major version increments) being very rare. Thus, the release will usually increment the patch version, when it only contains couple of bugfixes, or minor version, when it contains new functionality, or larger changes in implementation of current functionality.</p>
<p>After deciding which part of version number should be incremented, you can use one of the <code>*Release.py</code> scripts to perform the required changes to Catch.</p>
<p>This will take care of generating the single include header, updating version numbers everywhere and pushing the new version to Wandbox.</p>
<h3><a class="anchor" id="autotoc_md584"></a>
Release notes</h3>
<p>Once a release is ready, release notes need to be written. They should summarize changes done since last release. For rough idea of expected notes see previous releases. Once written, release notes should be added to <code>docs/release-notes.md</code>.</p>
<h3><a class="anchor" id="autotoc_md585"></a>
Commit and push update to GitHub</h3>
<p>After version number is incremented, single-include header is regenerated and release notes are updated, changes should be committed and pushed to GitHub.</p>
<h3><a class="anchor" id="autotoc_md586"></a>
Release on GitHub</h3>
<p>After pushing changes to GitHub, GitHub release <em>needs</em> to be created. Tag version and release title should be same as the new version, description should contain the release notes for the current release. Single header version of <code>catch.hpp</code> <em>needs</em> to be attached as a binary, as that is where the official download link links to. Preferably it should use linux line endings. All non-bundled reporters (Automake, TAP, TeamCity, SonarQube) should also be attached as binaries, as they might be dependent on a specific version of the single-include header.</p>
<p>Since 2.5.0, the release tag and the "binaries" (headers) should be PGP signed.</p>
<h4><a class="anchor" id="autotoc_md587"></a>
Signing a tag</h4>
<p>To create a signed tag, use <code>git tag -s &lt;VERSION&gt;</code>, where <code>&lt;VERSION&gt;</code> is the version being released, e.g. <code>git tag -s v2.6.0</code>.</p>
<p>Use the version name as the short message and the release notes as the body (long) message.</p>
<h4><a class="anchor" id="autotoc_md588"></a>
Signing the headers</h4>
<p>This will create ASCII-armored signatures for the headers that are uploaded to the GitHub release:</p>
<div class="fragment"><div class="line">$ gpg2 --armor --output catch.hpp.asc --detach-sig catch.hpp</div>
<div class="line">$ gpg2 --armor --output catch_reporter_automake.hpp.asc --detach-sig catch_reporter_automake.hpp</div>
<div class="line">$ gpg2 --armor --output catch_reporter_teamcity.hpp.asc --detach-sig catch_reporter_teamcity.hpp</div>
<div class="line">$ gpg2 --armor --output catch_reporter_tap.hpp.asc --detach-sig catch_reporter_tap.hpp</div>
<div class="line">$ gpg2 --armor --output catch_reporter_sonarqube.hpp.asc --detach-sig catch_reporter_sonarqube.hpp</div>
</div><!-- fragment --><p><em>GPG does not support signing multiple files in single invocation.</em> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
