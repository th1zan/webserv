\doxysection{catch\+\_\+session.\+cpp}
\hypertarget{catch__session_8cpp_source}{}\label{catch__session_8cpp_source}\index{/Users/thibault/kdrive/1-\/PROJECTS/P-\/42/push\_swap/push\_swap\_visualizer/build/\_deps/catch2-\/src/include/internal/catch\_session.cpp@{/Users/thibault/kdrive/1-\/PROJECTS/P-\/42/push\_swap/push\_swap\_visualizer/build/\_deps/catch2-\/src/include/internal/catch\_session.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ *\ \ Created\ by\ Martin\ on\ 31/08/2017.}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ *}}
\DoxyCodeLine{00004\ \textcolor{comment}{\ *\ \ Distributed\ under\ the\ Boost\ Software\ License,\ Version\ 1.0.\ (See\ accompanying}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ *\ \ file\ LICENSE\_1\_0.txt\ or\ copy\ at\ http://www.boost.org/LICENSE\_1\_0.txt)}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ */}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}catch\_session.h"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}catch\_commandline.h"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}catch\_console\_colour.h"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}catch\_enforce.h"{}}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ "{}catch\_list.h"{}}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}catch\_context.h"{}}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}catch\_run\_context.h"{}}}
\DoxyCodeLine{00015\ \textcolor{preprocessor}{\#include\ "{}catch\_stream.h"{}}}
\DoxyCodeLine{00016\ \textcolor{preprocessor}{\#include\ "{}catch\_test\_spec.h"{}}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}catch\_version.h"{}}}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#include\ "{}catch\_interfaces\_reporter.h"{}}}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#include\ "{}catch\_random\_number\_generator.h"{}}}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\#include\ "{}catch\_startup\_exception\_registry.h"{}}}
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#include\ "{}catch\_text.h"{}}}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\#include\ "{}catch\_stream.h"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#include\ "{}catch\_windows\_h\_proxy.h"{}}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#include\ "{}../reporters/catch\_reporter\_listening.h"{}}}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \textcolor{preprocessor}{\#include\ <cstdlib>}}
\DoxyCodeLine{00027\ \textcolor{preprocessor}{\#include\ <iomanip>}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#include\ <set>}}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#include\ <iterator>}}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{namespace\ }Catch\ \{}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \textcolor{keyword}{namespace\ }\{}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ MaxExitCode\ =\ 255;}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ IStreamingReporterPtr\ createReporter(std::string\ \textcolor{keyword}{const}\&\ reporterName,\ IConfigPtr\ \textcolor{keyword}{const}\&\ config)\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ reporter\ =\ Catch::getRegistryHub().getReporterRegistry().create(reporterName,\ config);}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ CATCH\_ENFORCE(reporter,\ \textcolor{stringliteral}{"{}No\ reporter\ registered\ with\ name:\ '"{}}\ <<\ reporterName\ <<\ \textcolor{stringliteral}{"{}'"{}});}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ reporter;}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ IStreamingReporterPtr\ makeReporter(std::shared\_ptr<Config>\ \textcolor{keyword}{const}\&\ config)\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (Catch::getRegistryHub().getReporterRegistry().getListeners().empty())\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ createReporter(config-\/>getReporterName(),\ config);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ On\ older\ platforms,\ returning\ std::unique\_ptr<ListeningReporter>}}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ when\ the\ return\ type\ is\ std::unique\_ptr<IStreamingReporter>}}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ doesn't\ compile\ without\ a\ std::move\ call.\ However,\ this\ causes}}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ a\ warning\ on\ newer\ platforms.\ Thus,\ we\ have\ to\ work\ around}}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ it\ a\ bit\ and\ downcast\ the\ pointer\ manually.}}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ ret\ =\ std::unique\_ptr<IStreamingReporter>(\textcolor{keyword}{new}\ ListeningReporter);}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ multi\ =\ \textcolor{keyword}{static\_cast<}ListeningReporter\&\textcolor{keyword}{>}(*ret);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ listeners\ =\ Catch::getRegistryHub().getReporterRegistry().getListeners();}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ listener\ :\ listeners)\ \{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ multi.addListener(listener-\/>create(\mbox{\hyperlink{struct_catch_1_1_reporter_config}{Catch::ReporterConfig}}(config)));}
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ multi.addReporter(createReporter(config-\/>getReporterName(),\ config));}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ret;}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \textcolor{keyword}{class\ }TestGroup\ \{}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{explicit}\ TestGroup(std::shared\_ptr<Config>\ \textcolor{keyword}{const}\&\ config)}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ :\ m\_config\{config\}}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ ,\ m\_context\{config,\ makeReporter(config)\}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ allTestCases\ =\ getAllTestCasesSorted(*m\_config);}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_matches\ =\ m\_config-\/>testSpec().matchesByFilter(allTestCases,\ *m\_config);}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ invalidArgs\ =\ m\_config-\/>testSpec().getInvalidArgs();}
\DoxyCodeLine{00072\ }
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_matches.empty()\ \&\&\ invalidArgs.empty())\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ test\ :\ allTestCases)}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!test.isHidden())}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_tests.emplace(\&test);}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ match\ :\ m\_matches)}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_tests.insert(match.tests.begin(),\ match.tests.end());}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ Totals\ execute()\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ invalidArgs\ =\ m\_config-\/>testSpec().getInvalidArgs();}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Totals\ totals;}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_context.testGroupStarting(m\_config-\/>name(),\ 1,\ 1);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ testCase\ :\ m\_tests)\ \{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!m\_context.aborting())}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ totals\ +=\ m\_context.runTest(*testCase);}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_context.reporter().skipTest(*testCase);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ match\ :\ m\_matches)\ \{}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (match.tests.empty())\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_context.reporter().noMatchingTestCases(match.name);}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ totals.error\ =\ -\/1;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!invalidArgs.empty())\ \{}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\ \textcolor{keyword}{const}\&\ invalidArg:\ invalidArgs)}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_context.reporter().reportInvalidArguments(invalidArg);}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\_context.testGroupEnded(m\_config-\/>name(),\ totals,\ 1,\ 1);}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ totals;}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{using\ }Tests\ =\ std::set<TestCase\ const*>;}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ std::shared\_ptr<Config>\ m\_config;}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ RunContext\ m\_context;}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ Tests\ m\_tests;}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ TestSpec::Matches\ m\_matches;}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ applyFilenamesAsTags(\mbox{\hyperlink{struct_catch_1_1_i_config}{Catch::IConfig}}\ \textcolor{keyword}{const}\&\ config)\ \{}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\&\ tests\ =\ \textcolor{keyword}{const\_cast<}std::vector<TestCase>\&\textcolor{keyword}{>}(getAllTestCasesSorted(config));}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ testCase\ :\ tests)\ \{}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ tags\ =\ testCase.tags;}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::string\ filename\ =\ testCase.lineInfo.file;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ lastSlash\ =\ filename.find\_last\_of(\textcolor{stringliteral}{"{}\(\backslash\)\(\backslash\)/"{}});}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lastSlash\ !=\ std::string::npos)\ \{}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename.erase(0,\ lastSlash);}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename[0]\ =\ \textcolor{charliteral}{'\#'};}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00130\ }
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ lastDot\ =\ filename.find\_last\_of(\textcolor{charliteral}{'.'});}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (lastDot\ !=\ std::string::npos)\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ filename.erase(lastDot);}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ tags.push\_back(std::move(filename));}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setTags(testCase,\ tags);}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \}\ \textcolor{comment}{//\ anon\ namespace}}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ Session::Session()\ \{}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ alreadyInstantiated\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ alreadyInstantiated\ )\ \{}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ \ \ \ \ CATCH\_TRY\ \{\ CATCH\_INTERNAL\_ERROR(\ \textcolor{stringliteral}{"{}Only\ one\ instance\ of\ Catch::Session\ can\ ever\ be\ used"{}}\ );\ \}}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \ \ \ \ CATCH\_CATCH\_ALL\ \{\ getMutableRegistryHub().registerStartupException();\ \}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ There\ cannot\ be\ exceptions\ at\ startup\ in\ no-\/exception\ mode.}}
\DoxyCodeLine{00151\ \textcolor{preprocessor}{\#if\ !defined(CATCH\_CONFIG\_DISABLE\_EXCEPTIONS)}}
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ exceptions\ =\ getRegistryHub().getStartupExceptionRegistry().getExceptions();}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\ !exceptions.empty()\ )\ \{}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \ \ \ \ config();}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \ \ \ \ getCurrentMutableContext().setConfig(m\_config);}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \ \ \ \ m\_startupExceptions\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00158\ \ \ \ \ \ \ \ \ \ \ \ \ Colour\ colourGuard(\ Colour::Red\ );}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \ \ \ \ Catch::cerr()\ <<\ \textcolor{stringliteral}{"{}Errors\ occurred\ during\ startup!"{}}\ <<\ \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ iterate\ over\ all\ exceptions\ and\ notify\ user}}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ ex\_ptr\ :\ exceptions\ )\ \{}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::rethrow\_exception(ex\_ptr);}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (\ std::exception\ \textcolor{keyword}{const}\&\ ex\ )\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Catch::cerr()\ <<\ Column(\ ex.what()\ ).indent(2)\ <<\ \textcolor{charliteral}{'\(\backslash\)n'};}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00169\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ alreadyInstantiated\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ m\_cli\ =\ makeCommandLineParser(\ m\_configData\ );}
\DoxyCodeLine{00173\ \ \ \ \ \}}
\DoxyCodeLine{00174\ \ \ \ \ Session::\string~Session()\ \{}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ Catch::cleanUp();}
\DoxyCodeLine{00176\ \ \ \ \ \}}
\DoxyCodeLine{00177\ }
\DoxyCodeLine{00178\ \ \ \ \ \textcolor{keywordtype}{void}\ Session::showHelp()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ Catch::cout()}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)nCatch\ v"{}}\ <<\ libraryVersion()\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ m\_cli\ <<\ std::endl}
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}For\ more\ detailed\ usage\ please\ see\ the\ project\ docs\(\backslash\)n"{}}\ <<\ std::endl;}
\DoxyCodeLine{00183\ \ \ \ \ \}}
\DoxyCodeLine{00184\ \ \ \ \ \textcolor{keywordtype}{void}\ Session::libIdentify()\ \{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ Catch::cout()}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ std::left\ <<\ std::setw(16)\ <<\ \textcolor{stringliteral}{"{}description:\ "{}}\ <<\ \textcolor{stringliteral}{"{}A\ Catch2\ test\ executable\(\backslash\)n"{}}}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ std::left\ <<\ std::setw(16)\ <<\ \textcolor{stringliteral}{"{}category:\ "{}}\ <<\ \textcolor{stringliteral}{"{}testframework\(\backslash\)n"{}}}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ std::left\ <<\ std::setw(16)\ <<\ \textcolor{stringliteral}{"{}framework:\ "{}}\ <<\ \textcolor{stringliteral}{"{}Catch\ Test\(\backslash\)n"{}}}
\DoxyCodeLine{00189\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ std::left\ <<\ std::setw(16)\ <<\ \textcolor{stringliteral}{"{}version:\ "{}}\ <<\ libraryVersion()\ <<\ std::endl;}
\DoxyCodeLine{00190\ \ \ \ \ \}}
\DoxyCodeLine{00191\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{int}\ Session::applyCommandLine(\ \textcolor{keywordtype}{int}\ argc,\ \textcolor{keywordtype}{char}\ \textcolor{keyword}{const}\ *\ \textcolor{keyword}{const}\ *\ argv\ )\ \{}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ m\_startupExceptions\ )}
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00195\ }
\DoxyCodeLine{00196\ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ result\ =\ m\_cli.parse(\ \mbox{\hyperlink{classclara_1_1detail_1_1_args}{clara::Args}}(\ argc,\ argv\ )\ );}
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !result\ )\ \{}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ config();}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ getCurrentMutableContext().setConfig(m\_config);}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \ \ \ \ Catch::cerr()}
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ Colour(\ Colour::Red\ )}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)nError(s)\ in\ input:\(\backslash\)n"{}}}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ Column(\ result.errorMessage()\ ).indent(\ 2\ )}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n\(\backslash\)n"{}};}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ Catch::cerr()\ <<\ \textcolor{stringliteral}{"{}Run\ with\ -\/?\ for\ usage\(\backslash\)n"{}}\ <<\ std::endl;}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ MaxExitCode;}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ m\_configData.showHelp\ )}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ showHelp();}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ m\_configData.libIdentify\ )}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \ \ \ \ libIdentify();}
\DoxyCodeLine{00213\ \ \ \ \ \ \ \ \ m\_config.reset();}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00215\ \ \ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \textcolor{preprocessor}{\#if\ defined(CATCH\_CONFIG\_WCHAR)\ \&\&\ defined(\_WIN32)\ \&\&\ defined(UNICODE)}}
\DoxyCodeLine{00218\ \ \ \ \ \textcolor{keywordtype}{int}\ Session::applyCommandLine(\ \textcolor{keywordtype}{int}\ argc,\ \textcolor{keywordtype}{wchar\_t}\ \textcolor{keyword}{const}\ *\ \textcolor{keyword}{const}\ *\ argv\ )\ \{}
\DoxyCodeLine{00219\ }
\DoxyCodeLine{00220\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{char}\ **utf8Argv\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{char}\ *[\ argc\ ];}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ argc;\ ++i\ )\ \{}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bufSize\ =\ WideCharToMultiByte(\ CP\_UTF8,\ 0,\ argv[i],\ -\/1,\ \textcolor{keyword}{nullptr},\ 0,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ utf8Argv[\ i\ ]\ =\ \textcolor{keyword}{new}\ \textcolor{keywordtype}{char}[\ bufSize\ ];}
\DoxyCodeLine{00226\ }
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ WideCharToMultiByte(\ CP\_UTF8,\ 0,\ argv[i],\ -\/1,\ utf8Argv[i],\ bufSize,\ \textcolor{keyword}{nullptr},\ \textcolor{keyword}{nullptr}\ );}
\DoxyCodeLine{00228\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ returnCode\ =\ applyCommandLine(\ argc,\ utf8Argv\ );}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\ \textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ argc;\ ++i\ )}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\ utf8Argv[\ i\ ];}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\ utf8Argv;}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ returnCode;}
\DoxyCodeLine{00238\ \ \ \ \ \}}
\DoxyCodeLine{00239\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordtype}{void}\ Session::useConfigData(\ ConfigData\ \textcolor{keyword}{const}\&\ configData\ )\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ m\_configData\ =\ configData;}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ m\_config.reset();}
\DoxyCodeLine{00244\ \ \ \ \ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \textcolor{keywordtype}{int}\ Session::run()\ \{}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (\ m\_configData.waitForKeypress\ \&\ WaitForKeypress::BeforeStart\ )\ !=\ 0\ )\ \{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \ \ \ \ Catch::cout()\ <<\ \textcolor{stringliteral}{"{}...waiting\ for\ enter/\ return\ before\ starting"{}}\ <<\ std::endl;}
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}\textcolor{keyword}{>}(std::getchar());}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ exitCode\ =\ runInternal();}
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ (\ m\_configData.waitForKeypress\ \&\ WaitForKeypress::BeforeExit\ )\ !=\ 0\ )\ \{}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ \ \ \ \ Catch::cout()\ <<\ \textcolor{stringliteral}{"{}...waiting\ for\ enter/\ return\ before\ exiting,\ with\ code:\ "{}}\ <<\ exitCode\ <<\ std::endl;}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{void}\textcolor{keyword}{>}(std::getchar());}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00256\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ exitCode;}
\DoxyCodeLine{00257\ \ \ \ \ \}}
\DoxyCodeLine{00258\ }
\DoxyCodeLine{00259\ \ \ \ \ \mbox{\hyperlink{structclara_1_1detail_1_1_parser}{clara::Parser}}\ \textcolor{keyword}{const}\&\ Session::cli()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_cli;}
\DoxyCodeLine{00261\ \ \ \ \ \}}
\DoxyCodeLine{00262\ \ \ \ \ \textcolor{keywordtype}{void}\ Session::cli(\ \mbox{\hyperlink{structclara_1_1detail_1_1_parser}{clara::Parser}}\ \textcolor{keyword}{const}\&\ newParser\ )\ \{}
\DoxyCodeLine{00263\ \ \ \ \ \ \ \ \ m\_cli\ =\ newParser;}
\DoxyCodeLine{00264\ \ \ \ \ \}}
\DoxyCodeLine{00265\ \ \ \ \ ConfigData\&\ Session::configData()\ \{}
\DoxyCodeLine{00266\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ m\_configData;}
\DoxyCodeLine{00267\ \ \ \ \ \}}
\DoxyCodeLine{00268\ \ \ \ \ Config\&\ Session::config()\ \{}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !m\_config\ )}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ m\_config\ =\ std::make\_shared<Config>(\ m\_configData\ );}
\DoxyCodeLine{00271\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ *m\_config;}
\DoxyCodeLine{00272\ \ \ \ \ \}}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keywordtype}{int}\ Session::runInternal()\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ m\_startupExceptions\ )}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00277\ }
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\_configData.showHelp\ ||\ m\_configData.libIdentify)\ \{}
\DoxyCodeLine{00279\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00281\ }
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ CATCH\_TRY\ \{}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \ \ \ \ config();\ \textcolor{comment}{//\ Force\ config\ to\ be\ constructed}}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \ \ \ \ seedRng(\ *m\_config\ );}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ m\_configData.filenamesAsTags\ )}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ applyFilenamesAsTags(\ *m\_config\ );}
\DoxyCodeLine{00289\ }
\DoxyCodeLine{00290\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Handle\ list\ request}}
\DoxyCodeLine{00291\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ Option<std::size\_t>\ listed\ =\ list(\ m\_config\ )\ )}
\DoxyCodeLine{00292\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(\ *listed\ );}
\DoxyCodeLine{00293\ }
\DoxyCodeLine{00294\ \ \ \ \ \ \ \ \ \ \ \ \ TestGroup\ tests\ \{\ m\_config\ \};}
\DoxyCodeLine{00295\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{auto}\ \textcolor{keyword}{const}\ totals\ =\ tests.execute();}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ m\_config-\/>warnAboutNoTests()\ \&\&\ totals.error\ ==\ -\/1\ )}
\DoxyCodeLine{00298\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2;}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Note\ that\ on\ unices\ only\ the\ lower\ 8\ bits\ are\ usually\ used,\ clamping}}
\DoxyCodeLine{00301\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ the\ return\ value\ to\ 255\ prevents\ false\ negative\ when\ some\ multiple}}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ of\ 256\ tests\ has\ failed}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (std::min)\ (MaxExitCode,\ (std::max)\ (totals.error,\ \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(totals.assertions.failed)));}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00305\ \textcolor{preprocessor}{\#if\ !defined(CATCH\_CONFIG\_DISABLE\_EXCEPTIONS)}}
\DoxyCodeLine{00306\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{catch}(\ std::exception\&\ ex\ )\ \{}
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \ \ \ \ Catch::cerr()\ <<\ ex.what()\ <<\ std::endl;}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ MaxExitCode;}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00310\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00311\ \ \ \ \ \}}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ \}\ \textcolor{comment}{//\ end\ namespace\ Catch}}

\end{DoxyCode}
